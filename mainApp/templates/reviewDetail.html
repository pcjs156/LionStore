{% extends 'base.html' %}
{% load static %}

{% block head %}
<title>ë¦¬ë·° ìƒì„¸ ì •ë³´</title>
<!-- ë¦¬ë·° ìƒì„¸ ì •ë³´ê°€ ë…¸ì¶œë¨. ì—¬ê¸°ì„œ ë¦¬ë·°ì˜ ìˆ˜ì •/ì‚­ì œì— ì ‘ê·¼í•¨.  -->
{% endblock %}

{% block content %}
<a href="{% url 'productDetail' review.product.id %}">ì œí’ˆ ë³´ê¸°</a>

{% if review.modified %}
<div>{{ review.pub_date | date:"Yë…„ mì›” dì¼ a hì‹œ ië¶„" }}ì— ìˆ˜ì •ë¨</div>
{% else %}
<div>{{ review.pub_date | date:"Yë…„ mì›” dì¼ a hì‹œ ië¶„" }}ì— ì‘ì„±ë¨</div>
{% endif %}


{% if author is user %}
<br>
<div>
    <div>ë¦¬ë·°ì–´ íƒœê·¸</div>
    {% for tag in userTags %}
    <span>{{ tag }}, </span>
    {% endfor %}
</div>
<br>
{% endif %}

{% for image in images %}

{% if image %}
{% if review.author == user %}
<a href="{% url 'reviewImageModify' review_id=review.id imageIdx=forloop.counter0 %}">
    <img src="{{ image.url }}" style="width:5rem; height:5rem;">
</a>
{% else %}
<img src="{{ image.url }}" style="width:5rem; height:5rem;">
{% endif %}
{% endif %}

{% endfor %}

{% if canAddImage and isAuthor %}
<!-- Button trigger modal -->
<div><a href="" data-toggle="modal" data-target="#reviewImageAddModal">ë¦¬ë·° ì´ë¯¸ì§€ ì¶”ê°€í•˜ê¸°</a></div>
{% endif %}

<div>ì‘ì„±ì : {{ author }}</div>
<div>ì œí’ˆëª… : {{ product }}</div>
<div>í•œì¤„í‰ : {{ comment }} </div>
<div>ì¥ì  : {{ goodPoint }}</div>
<div>ë‹¨ì  : {{ weakPoint }}</div>
<br>

<div>ì´ì  {{ totalScore }}</div>
<div class="rateit svg" data-rateit-value="{{totalScore}}" data-rateit-readonly="true" data-rateit-starwidth="15"
    step="0.1" data-rateit-starheight="15"></div>

<div>{{gripScore.name}}</div>
<div class="rateit svg" data-rateit-value="{{gripScore.score}}" data-rateit-readonly="true"
    aria-valuenow="{{gripScore.score}}" data-rateit-starwidth="15" data-rateit-starheight="15"></div>

<div>{{lifeScore.name}}</div>
<div class="rateit svg" data-rateit-value="{{lifeScore.score}}" data-rateit-readonly="true" data-rateit-starwidth="15"
    data-rateit-starheight="15"></div>

<div>{{durabilityScore.name}}</div>
<div class="rateit svg" data-rateit-value="{{durabilityScore.score}}" data-rateit-readonly="true"
    data-rateit-starwidth="15" data-rateit-starheight="15"></div>

<div>{{designScore.name}}</div>
<div class="rateit svg" data-rateit-value="{{designScore.score}}" data-rateit-readonly="true" data-rateit-starwidth="15"
    data-rateit-starheight="15"></div>

<div>{{textureScore.name}}</div>
<div class="rateit svg" data-rateit-value="{{textureScore.score}}" data-rateit-readonly="true"
    data-rateit-starwidth="15" data-rateit-starheight="15"></div>

<div>{{costEffetivenessScore.name}}</div>
<div class="rateit svg" data-rateit-value="{{costEffetivenessScore.score}}" data-rateit-readonly="true"
    data-rateit-starwidth="15" data-rateit-starheight="15"></div>

<hr>

<div style="text-align: right;">
    {{ likeMessage }}
    <a href="{% url 'reviewLikeProcess' review_id=review.id %}">
        {% if userLike %}
        <!-- ìœ ì €ê°€ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥¸ ê²½ìš° -->
        â¤ï¸
        {% else %}
        <!-- ìœ ì €ê°€ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ì§€ ì•Šì€ ê²½ìš° -->
        ğŸ–¤
        {% endif %}
    </a>
</div>

<hr>

<form action="/store/commentCreate/{{ review.id }}" method="POST">
    {% csrf_token %}
    <input type="text" name="body">
    <button type="submit">ì‘ì„±</button>
</form>

<div class="blog__details__comment">
    {% for comment in comments %}
    <div class="blog__comment__item">
        <div class="blog__comment__item__pic">
            <img class="profile_image" src="{{ comment.author.image.url }}" alt="{{ comment.author.nickname }}ë‹˜ì˜ í”„ë¡œí•„ ì´ë¯¸ì§€" style="max-width: 40px; max-height: 40x; width: auto; height: auto; display: block; margin:0px auto;">
        </div>
        <div class="blog__comment__item__text">
            <h6>{{ comment.author.nickname }}</h6>
            <p>{{ comment.body }}</p>
            <ul>
                <li><i class="fa fa-clock-o"></i> {{ comment.pub_date | date:"Y/m/d a h:i"}} </li>
                {% if comment.author == request.user %}
                <li><a href="{% url 'commentDelete' comment.id %}"><i class="fa fa-trash-o" aria-hidden="true"></i></a></li>
                {% endif %}
            </ul>
        </div>
    </div>
    <br>
    {% endfor %}
</div>

<hr>

<div>íƒœê·¸ ëª©ë¡</div>
{% for tag in productTags %}
<div><a href="{% url 'tagProduct' tag.id %}">{{ tag }}</a></div>
{% endfor %}

<hr>


{% if isAuthor %}
<div><a href="{% url 'reviewModify' review.id %}">ë¦¬ë·° ìˆ˜ì •</a></div>

<!-- Button trigger modal -->
<a href="" data-toggle="modal" data-target="#deleteModal">ê²Œì‹œê¸€ ì‚­ì œí•˜ê¸°</a>

<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">ë¦¬ë·° {{ review.id }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            </div>
            <div class="modal-footer">
                <a href="{% url 'reviewDelete' review.id %}"><button type="button" class="btn btn-danger">ì˜ˆ</button></a>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">ì•„ë‹ˆì˜¤</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="reviewImageAddModal" tabindex="-1" role="dialog" aria-labelledby="reviewImageAddModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="reviewImageAddModalLabel">ë¦¬ë·° ì´ë¯¸ì§€ ì¶”ê°€ : {{ imageLeft }}ì¥ ê°€ëŠ¥</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="{% url 'reviewImageAdd' review.id %}" enctype="multipart/form-data" method="POST">
                    {% csrf_token %}
                    {{ newImageForm.reviewImage1 }}
                    <br>
            </div>
            <div class="modal-footer">
                <input type="submit" value="ì—…ë¡œë“œ" class="btn btn-success" style="text-align: right;">
                </form>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}